<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>学生管理</title>
    <link rel="stylesheet" href="../../css/bootstrap.css"/>
    <link rel="stylesheet" href="../../css/data-base.css"/>
    <script src="../../js/jquery-3.1.1.js"></script>
    <script src="../../js/layer/layer.js"></script>
    <script src="../../js/bootstrap.js"></script>
</head>
<body>
<!-- Modal -->
<div class="fullbox">
    <h1 class="col-sm-12 col-xs-12"><span class="glycolor glyphicon glyphicon-align-left"></span>&nbsp;班级管理</h1>
<div class="modal fade" id="myStudentMan" tabindex="-1" role="dialog"
     aria-labelledby="myStudentManLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myStudentManLabel">学生信息</h4>
            </div>
            <div class="modal-body">
                <form action="post">
                    <div class="form-group">
                        <lable>学号 <sup class="data-star">*</sup>：</lable>
                        <input type="text" id="ID" class="form-control">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                    </div>
                    <div class="form-group">
                        <lable>姓名<sup class="data-star">*</sup>：</lable>
                        <input type="text" id="name" class="form-control">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                    </div>
                    <div class="form-group">
                        <lable>性别<sup class="data-star">*</sup>：</lable>
                        <select class="form-control" id="sex">
                            <option>男</option>
                            <option>女</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <lable>家长姓名<sup class="data-star">*</sup>：</lable>
                        <input type="text" id="parentName" class="form-control">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-6 col-sm-6">
                            <lable>家长联系方式<sup class="data-star">*</sup></lable>
                            <input class="form-control" id="parentTel" type="text">
                            <p style="font-size: 12px;color: red;margin: 0"></p>
                        </div>
                        <div class="form-group col-lg-6 col-sm-6">
                            <lable>激活状态<sup class="data-star">*</sup></lable>
                            <select class="form-control" id="activate">
                                <option>0</option>
                                <option>1</option>
                            </select>
                            <!--<input class="form-control" id="activate" type="text">-->
                        </div>
                    </div>


                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" id="editSave"  class="btn btn-success">保存变更</button>
            </div>
        </div>
    </div>
</div>
<!--end Modal-->
<!-- Modal -->
<div class="modal fade" id="myaddStudentMan" tabindex="-1" role="dialog"
     aria-labelledby="myaddStudentManLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myaddStudentManLabel">员工信息</h4>
            </div>
            <div class="modal-body">
                <form action="post">
                    <div class="form-group">
                        <lable>学号 <sup class="data-star">*</sup>：</lable>
                        <input type="text" id="addID" class="form-control">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                    </div>
                    <div class="form-group">
                        <lable>姓名<sup class="data-star">*</sup>：</lable>
                        <input type="text" id="addname" class="form-control">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                    </div>
                    <div class="form-group">
                        <lable>性别<sup class="data-star">*</sup>：</lable>
                        <select class="form-control" id="addsex">
                            <option>男</option>
                            <option>女</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <lable>家长姓名<sup class="data-star">*</sup>：</lable>
                        <input type="text" id="addparentName" class="form-control">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                    </div>
                    <div class="form-group">
                        <lable>家长联系方式<sup class="data-star">*</sup></lable>
                        <input class="form-control" id="addparentTel" type="text">
                        <p style="font-size: 12px;color: red;margin: 0"></p>
                        <p></p>
                    </div>
                    <div class="form-group">
                        <lable>激活状态<sup class="data-star">*</sup></lable>
                        <input class="form-control" id="addactivate" type="text">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" id="addSave" class="btn btn-success">保存变更</button>
            </div>
        </div>
    </div>
</div>
<!--end Modal-->
    <div class="data-contexte">
        <!--搜索框-->
        <div class="data-secr">
            <form action="post" class="form-inline">
                <div class="form-group">
                    <lable>学号：</lable>
                    <input type="text" class="form-control">
                </div>
                <div class="form-group">
                    <lable>姓名：</lable>
                    <input type="text" class="form-control">
                </div>
                <div class="form-group">
                    <lable>班级：</lable>
                    <input type="text" class="form-control">
                </div>
                <span class="data-pointer">
                    <span class="glyphicon glyphicon-search glyphicon data-pointer"></span>
                    搜索
                </span>
            </form>
        </div>
        <!--end搜索框-->
        <div class="table-responsive data-tableRadius">
            <table class="table table-striped table-bordered">
                <thead class="data-tabhead">
                <tr>
                    <td>学号</td>
                    <td>姓名</td>
                    <td>性别</td>
                    <td>家长姓名</td>
                    <td>家长联系方式</td>
                    <td>激活状态</td>
                    <td>编辑</td>
                </tr>
                </thead>
                <tbody id="mytbody">
                <tr>
                    <td>005</td>
                    <td>张三</td>
                    <td>男</td>
                    <td>张大</td>
                    <td>18838188569</td>
                    <td>1</td>
                    <td>
                        <div class="data-edit" data-toggle="modal" onclick='edit(this)' data-target="#myStudentMan">编辑</div>
                    </td>
                </tr>
                <tr>
                    <td>006</td>
                    <td>里三</td>
                    <td>男</td>
                    <td>里大</td>
                    <td>125468545663214</td>
                    <td>1</td>
                    <td>
                        <div class="data-edit" data-toggle="modal" onclick='edit(this)' data-target="#myStudentMan">编辑</div>
                    </td>
                </tr>
                <tr>
                    <td>007</td>
                    <td>王三</td>
                    <td>男</td>
                    <td>王大</td>
                    <td>125468545663214</td>
                    <td>1</td>
                    <td>
                        <div class="data-edit" data-toggle="modal" onclick='edit(this)' data-target="#myStudentMan">编辑</div>
                    </td>
                </tr>
                <tr>
                    <td>008</td>
                    <td>亿三</td>
                    <td>男</td>
                    <td>亿大</td>
                    <td>125468545663214</td>
                    <td>1</td>
                    <td>
                        <div class="data-edit" data-toggle="modal" onclick='edit(this)' data-target="#myStudentMan">编辑</div>
                    </td>
                </tr>
                <tr>
                    <td>008</td>
                    <td>五三</td>
                    <td>男</td>
                    <td>五大</td>
                    <td>125468545663214</td>
                    <td>1</td>
                    <td>
                        <div class="data-edit" data-toggle="modal" onclick='edit(this)' data-target="#myStudentMan">编辑</div>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="data-divpage">
                <span>上一页</span>
                <a href="javascript:;">1</a>
                <a href="javascript:;">2</a>
                <a href="javascript:;">3</a>
                <a href="javascript:;">4</a>
                <a href="javascript:;">5</a>
                ....
                <a href="javascript:;">9</a>
                <span>下一页</span>
            </div>
        </div>

        <button class="data-edit data-bw" data-toggle="modal" data-target="#myaddStudentMan">新增学生</button>
    </div>
    </div>
</body>
<script>
    //编辑
 function edit(obj) {
        var ID=$(obj).parent().parent().find('td:nth-child(1)').text();
        var name=$(obj).parent().parent().find('td:nth-child(2)').text();
        var sex=$(obj).parent().parent().find('td:nth-child(3)').text();
        var parentName=$(obj).parent().parent().find('td:nth-child(4)').text();
        var parentTel=$(obj).parent().parent().find('td:nth-child(5)').text();
        var activate=$(obj).parent().parent().find('td:nth-child(6)').text();

        $('#ID').val(ID);
        $('#name').val(name);
        $('#sex').val(sex);
        $('#parentName').val(parentName);
        $('#parentTel').val(parentTel);
        $('#activate').val(activate);
        $('tr').attr('active','0');
        $(obj).parent().parent().attr('active','1');
    }
    //编辑保存
   function editSave(){
        var ID=$('#ID').val();
        var name=$('#name').val();
        var sex=$('#sex').val();
        var parentName=$('#parentName').val();
        var parentTel=$('#parentTel').val();
       var activate=$('#activate').val();
        $('tr').each(function(i){
            if($(this).attr('active')=='1'){
                $(this).find('td:nth-child(1)').text(ID);
                $(this).find('td:nth-child(2)').text(name);
                $(this).find('td:nth-child(3)').text(sex);
                $(this).find('td:nth-child(4)').text(parentName);
                $(this).find('td:nth-child(5)').text(parentTel);
                $(this).find('td:nth-child(6)').text(activate);
            }
        })
    }
    $('#editSave').on('click',function(){
        layer.open({
            title:'警告'
            ,content:'确定保存变更吗？'
            ,offset:'100px'
            ,btn:['确定','取消']
            ,yes:function(index,layero){
                editSave();
                layer.close(index)
            }
        })
    });
    //新增
    $('#addSave').click(function () {
        layer.open({
            title:'警告'
            ,content:'确定保存变更吗？'
            ,btn:['确定','取消']
            ,offset:'100px'
            ,yes:function(index,layero){
                var id=$('#addID').val();
                var name=$('#addname').val();
                var sex=$('#addsex').val();
                var parentName=$('#addparentName').val();
                var parentTel=$('#addparentTel').val();
                var activate=$('#addactivate').val();
                var a=" <tr><td>"+id+"</td> <td>"+name+"</td><td>"+sex+"</td> <td>"+parentName+"</td> <td>"+parentTel+"</td><td>"+activate+"</td> <td> <div class='data-edit' data-toggle='modal' data-target='#myStudentMan' onclick='edit(this)'>编辑</div> </td></tr>";
                $('#mytbody').append(a);
                layer.close(index)
            }
        })
    });

    layer.config({
        skin: 'layui-layer-molv'
    })
    //验证
    $('#parentTel').blur(function(){
        regname(this,'tel')
    });
    $("#name").blur(function(){
        regname(this,'name')
    });
    $("#parentName").blur(function(){
        regname(this,'name')
    });
    $("#ID").blur(function(){
        regname(this,'id')
    });
    $('#addparentTel').blur(function(){
        regname(this,'tel')
    });
    $("#addname").blur(function(){
        regname(this,'name')
    });
    $("#addparentName").blur(function(){
        regname(this,'name')
    });
    $("#addID").blur(function(){
        regname(this,'id')
    });
    function regname(obj,type){
        var text;
        var value=$(obj).val();
        if(type=="tel"){
            text="手机格式不正确";
        }else
        if(type=="name"){
            text="请输入正确的格式";
        }else
        if(type="id"){
            text="请输入正确的学号";
        }
        var a=reg(value,type);
        if(!a){
            $(obj).next().text(text);
        }else if(a){
            $(obj).next().text("");
        }
    }
    function reg(a,type){
        var reg;
        if(type=="tel"){
            reg=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;
        }else
        if(type=="name"){
            reg=/^[A-Za-z0-9\u4e00-\u9fa5]+$/;
        }else
        if(type=="id"){
            reg=/^[0-1]{1}[0-9]{2}$/;
        }
        return reg.test(a);

    }
</script>
</html>